# Copyright 2016-2026 Milligan Partners LLC
#
# SPDX-License-Identifier: Apache-2.0
#
# ===========================================================================
# Hyperledger Fabric 2.5.x Cryptogen Configuration
# Tolling.Network - National Toll Interoperability Blockchain
# ===========================================================================
#
# This configuration generates cryptographic material for:
# - 1 Orderer organization with 3 Raft consensus nodes
# - 4 Peer organizations (one peer each for development/testing)
#
# PRODUCTION NOTE: For production deployments, use Fabric CA instead of
# cryptogen for proper certificate lifecycle management (renewal, revocation).
# ===========================================================================

# ---------------------------------------------------------------------------
# OrdererOrgs - Organizations managing orderer nodes
# ---------------------------------------------------------------------------
# Raft consensus requires an odd number of nodes (3, 5, 7) for Byzantine
# fault tolerance. With 3 nodes, the cluster tolerates 1 failure.
# ---------------------------------------------------------------------------
OrdererOrgs:
  - Name: Orderer
    Domain: orderer.tolling.network
    EnableNodeOUs: true
    # Explicit CA settings for generated certificates
    CA:
      Country: US
      Province: Virginia
      Locality: Richmond
    # Three orderer nodes for Raft consensus
    Specs:
      - Hostname: orderer1
        SANS:
          - localhost
          - 127.0.0.1
      - Hostname: orderer2
        SANS:
          - localhost
          - 127.0.0.1
      - Hostname: orderer3
        SANS:
          - localhost
          - 127.0.0.1

# ---------------------------------------------------------------------------
# PeerOrgs - Organizations managing peer nodes
# ---------------------------------------------------------------------------
# Each organization represents a toll agency or consortium participant.
# EnableNodeOUs provides role-based access control (admin, peer, client, orderer).
# ---------------------------------------------------------------------------
PeerOrgs:
  # Org1 - Example: E-ZPass consortium member
  - Name: Org1
    Domain: org1.tolling.network
    EnableNodeOUs: true
    CA:
      Country: US
      Province: Virginia
      Locality: Richmond
    Template:
      Count: 1  # peer0.org1.tolling.network
      SANS:
        - localhost
        - 127.0.0.1
    Users:
      Count: 1  # User1@org1.tolling.network (Admin is automatic)

  # Org2 - Example: CUSIOP consortium member
  - Name: Org2
    Domain: org2.tolling.network
    EnableNodeOUs: true
    CA:
      Country: US
      Province: Texas
      Locality: Austin
    Template:
      Count: 1  # peer0.org2.tolling.network
      SANS:
        - localhost
        - 127.0.0.1
    Users:
      Count: 1  # User1@org2.tolling.network (Admin is automatic)

  # Org3 - Example: SEIOP consortium member
  - Name: Org3
    Domain: org3.tolling.network
    EnableNodeOUs: true
    CA:
      Country: US
      Province: Florida
      Locality: Orlando
    Template:
      Count: 1  # peer0.org3.tolling.network
      SANS:
        - localhost
        - 127.0.0.1
    Users:
      Count: 1  # User1@org3.tolling.network (Admin is automatic)

  # Org4 - Example: WRTO/FasTrak consortium member
  - Name: Org4
    Domain: org4.tolling.network
    EnableNodeOUs: true
    CA:
      Country: US
      Province: California
      Locality: Sacramento
    Template:
      Count: 1  # peer0.org4.tolling.network
      SANS:
        - localhost
        - 127.0.0.1
    Users:
      Count: 1  # User1@org4.tolling.network (Admin is automatic)
