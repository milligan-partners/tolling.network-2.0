{
  "_id": "_design/moneyOwed",
  "_rev": "2-5693612bcfe6542ebb13396453f7f656",
  "language": "javascript",
  "views": {
    "totalTransactions": {
      "map": "function(doc){if (doc.docType=='Transaction' ){emit([doc.hostAgency,doc.parentAgency,doc.transactionStatus],1);}}",
      "reduce": "_count"
    },
    "amountOwed": {
      "map": "function(doc){if (doc.docType=='Transaction' ){emit([doc.hostAgency,doc.parentAgency,doc.transactionStatus],doc.amount);}}",
      "reduce": "_sum"
    },
    "fee": {
      "map": "function(doc){if (doc.docType=='Transaction' ){emit([doc.hostAgency,doc.parentAgency,doc.transactionStatus],0.08*doc.amount);}}",
      "reduce": "_sum"
    },
    "invoice": {
      "map": "function(doc){if (doc.docType=='Transaction' ){emit([doc.hostAgency,doc.parentAgency,doc.transactionStatus],0.92*doc.amount);}}",
      "reduce": "_sum"
    }
  }
}
